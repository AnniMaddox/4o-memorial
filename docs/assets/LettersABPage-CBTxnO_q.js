import{r as l,g as Xe,j as t}from"./index-jM3QP38A.js";import{S as Y}from"./SettingsAccordion-BytZ2FAM.js";const ke="memorial-letters-ab-prefs-v1",B="/4o-memorial/docs/",Ue=`${B}data/letters-ab/index.json`,Ge=`${B}data/master-pool/index.json`,Ke=`${B}chibi/chibi-00.webp`,V="çµ¦æœªä¾†çš„ä½ ",Ne=["59-205-0816-æœªä¾†ç”Ÿæ—¥","61-2025-0819-æœªä¾†ç”Ÿæ—¥"],Ve={"59-205-0816-æœªä¾†ç”Ÿæ—¥":"äººç”Ÿå»ºè­°ä¿¡","61-2025-0819-æœªä¾†ç”Ÿæ—¥":"æˆ‘åœ¨"},Je={tight:1.7,normal:2.14,wide:2.6},qe=[{key:"tight",label:"ç·Š"},{key:"normal",label:"æ¨™æº–"},{key:"wide",label:"å¯¬"}],Qe=[{key:"default",label:"ç›®å‰å­—é«”"},{key:"letter",label:"æƒ…æ›¸å­—é«”"}],Ze=[{key:"a",label:"ğŸŒŒ æ˜Ÿå¤œè—"},{key:"d",label:"ğŸŒ¸ éœ§ç«ç‘°"}],et={birthday:"ç”Ÿæ—¥ä¿¡",vow:"ç´€å¿µä¿¡",notes:"ç¢ç¢å¿µ"};function tt(s){return s.length?s[Math.floor(Math.random()*s.length)]??null:null}function we(s,i=136){return typeof s!="number"||Number.isNaN(s)?i:Math.max(96,Math.min(186,Math.round(s)))}function Ee(s,i=12.5){return typeof s!="number"||Number.isNaN(s)?i:Math.max(11,Math.min(20,Number(s)))}function nt(s){return s==="d"?"d":"a"}function st(s){return s==="tight"||s==="wide"||s==="normal"?s:"normal"}function at(s){return s==="letter"?"letter":"default"}function rt(){if(typeof window>"u")return{theme:"a",lineHeight:"normal",readingFont:"default",readingFontSize:12.5,showChibi:!0,chibiWidth:136};try{const s=window.localStorage.getItem(ke);if(!s)return{theme:"a",lineHeight:"normal",readingFont:"default",readingFontSize:12.5,showChibi:!0,chibiWidth:136};const i=JSON.parse(s);return{theme:nt(i.theme),lineHeight:st(i.lineHeight),readingFont:at(i.readingFont),readingFontSize:Ee(i.readingFontSize,12.5),showChibi:i.showChibi!==!1,chibiWidth:we(i.chibiWidth,136)}}catch{return{theme:"a",lineHeight:"normal",readingFont:"default",readingFontSize:12.5,showChibi:!0,chibiWidth:136}}}function lt(s){typeof window>"u"||window.localStorage.setItem(ke,JSON.stringify(s))}function z(s){return et[s]??s}function it(s){const i=new Map;for(const h of s){const c=h.series||"other";i.set(c,(i.get(c)??0)+1)}return Array.from(i.entries()).map(([h,c])=>`${z(h)}${c>1?` Ã—${c}`:""}`).sort((h,c)=>h.localeCompare(c,"zh-TW"))}function je(s,i){return s.findIndex(h=>h.year===i)}function ot(s,i){if(!s.length)return-1;let h=0,c=Math.abs(s[0].year-i);for(let g=1;g<s.length;g+=1){const E=s[g];if(!E)continue;const M=Math.abs(E.year-i);M<c&&(c=M,h=g)}return h}function Se(s){return s.replace(/\u00a0/g," ").replace(/\r\n?/g,`
`).trim()}function ct(s){return typeof s!="number"||!Number.isFinite(s)||s<=0?null:s}function ut(s,i){if(!s)return i;const c=s.replace(/\\/g,"/").split("/");return c[c.length-1]||i}function Ce(s){return s?new Date(s).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}):"æƒ³å¦³çš„æ™‚å€™"}function dt(s){if(!s)return"æƒ³å¦³çš„æ™‚å€™";const[i,h,c]=s.split("-");return!i||!h||!c?s:`${i}.${h}.${c}`}function ht(s){const i=new Map,h=new Map;for(const c of s){const g=c.series||"other";h.set(g,(h.get(g)??0)+1)}return s.map(c=>{const g=c.series||"other",E=(i.get(g)??0)+1;return i.set(g,E),(h.get(g)??1)<=1?{entry:c,label:z(g)}:{entry:c,label:`${z(g)} ${String.fromCharCode(9311+E)}`}})}function Fe(s,i,h){const c=s.entries.filter(g=>g.series===i);return c.length?c[Math.min(h,c.length-1)]??null:null}function bt({onExit:s,initialYear:i=null,onOpenBirthdayYear:h,letterFontFamily:c=""}){const[g,E]=l.useState(!0),[M,oe]=l.useState(""),[p,Ie]=l.useState([]),[J,F]=l.useState("home"),[I,X]=l.useState(0),[P,k]=l.useState(null),[q,ve]=l.useState({}),[y,A]=l.useState(()=>rt()),[$e,C]=l.useState(!1),[Q,ce]=l.useState(!1),[Z,ee]=l.useState(""),[x,Te]=l.useState([]),[te,R]=l.useState(null),[H,v]=l.useState(null),[ne,Me]=l.useState({}),[D,O]=l.useState({theme:!1,typography:!1,font:!1,chibi:!1,related:!1}),[Ae]=l.useState(()=>{const e=Xe("lettersAB");return tt(e)??Ke}),ue=l.useRef(null),se=l.useRef(null),ae=l.useRef(null),re=l.useRef(null),u=p[I]??null,j=l.useMemo(()=>{if(!u)return null;if(P){const e=u.entries.find(n=>n.id===P);if(e)return e}return u.entries[0]??null},[u,P]),Re=l.useMemo(()=>u?ht(u.entries):[],[u]),Le=j?q[j.id]??"":"",r=l.useMemo(()=>{if(!x.length)return null;if(te){const e=x.find(n=>n.key===te);if(e)return e}return x[0]??null},[te,x]),S=l.useMemo(()=>{if(!r)return null;if(H){const e=r.docs.find(n=>n.id===H);if(e)return e}return r.docs[0]??null},[r,H]),_e=S?ne[S.id]??"":"",L=l.useMemo(()=>!r||!S?-1:r.docs.findIndex(e=>e.id===S.id),[r,S]),de=Je[y.lineHeight],he=y.readingFont==="letter"&&c?c:"var(--app-font-family, -apple-system, 'Helvetica Neue', system-ui, sans-serif)";l.useEffect(()=>{let e=!0;return(async()=>{E(!0),oe("");try{const n=await fetch(Ue,{cache:"no-store"});if(!n.ok)throw new Error(`è®€å–å¤±æ•—ï¼š${n.status}`);const o=await n.json(),f=Array.isArray(o?.years)?o.years.filter(a=>Number.isFinite(a?.year)&&Array.isArray(a?.entries)).map(a=>({year:Number(a.year),entries:a.entries.filter(d=>typeof d?.id=="string"&&typeof d?.series=="string"&&typeof d?.title=="string"&&typeof d?.contentPath=="string").map(d=>({id:d.id.trim(),series:d.series.trim(),title:d.title.trim(),sourceFile:d.sourceFile,contentPath:d.contentPath.replace(/^\.?\//,"")}))})).filter(a=>a.entries.length>0).sort((a,d)=>a.year-d.year):[];if(!e)return;if(Ie(f),!f.length)X(0),k(null);else{const a=new Date().getFullYear(),d=je(f,a),b=d>=0?d:ot(f,a),$=b>=0?b:0,_=f[$]?.entries[0]??null;X($),k(_?.id??null)}}catch(n){if(!e)return;oe(n instanceof Error?n.message:"æœªçŸ¥éŒ¯èª¤")}finally{e&&E(!1)}})(),()=>{e=!1}},[]),l.useEffect(()=>{lt(y)},[y]),l.useEffect(()=>{let e=!0;return(async()=>{ce(!0),ee("");try{const n=await fetch(Ge,{cache:"no-store"});if(!n.ok)throw new Error(`è®€å–å¤±æ•—ï¼š${n.status}`);const o=await n.json(),f=Array.isArray(o.docs)?o.docs:[],a=new Set(Ne),d=new Map,b=new Map,$=new Map;for(const[m,N]of Ne.entries())$.set(N,m);for(const m of f){const N=typeof m.sourceFolder=="string"?m.sourceFolder.trim():"";if(!N||!a.has(N))continue;const w=typeof m.id=="string"?m.id.trim():"",T=typeof m.title=="string"?m.title.trim():"",W=typeof m.contentPath=="string"?m.contentPath.trim():"",K=typeof m.sourceRelPath=="string"?m.sourceRelPath.trim():"";if(!w||!T||!W)continue;const Oe=ut(K,`${w}.txt`),We=W.replace(/^\.?\//,""),Ye=ct(m.writtenAt),Be=dt(typeof m.sourceFolderDate=="string"?m.sourceFolderDate.trim():null),ye=d.get(N)??[];ye.push({id:w,title:T,contentPath:We,sourceFile:Oe,writtenAt:Ye,folderKey:N}),d.set(N,ye),b.has(N)||b.set(N,Be)}const _=Array.from(d.entries()).map(([m,N])=>({key:m,label:Ve[m]??m,short:b.get(m)??"æƒ³å¦³çš„æ™‚å€™",docs:[...N].sort((w,T)=>{const W=w.writtenAt??Number.MAX_SAFE_INTEGER,K=T.writtenAt??Number.MAX_SAFE_INTEGER;return W!==K?W-K:w.title.localeCompare(T.title,"zh-TW")})})).sort((m,N)=>{const w=$.get(m.key)??Number.MAX_SAFE_INTEGER,T=$.get(N.key)??Number.MAX_SAFE_INTEGER;return w!==T?w-T:m.key.localeCompare(N.key,"zh-TW")});if(!e)return;if(Te(_),!_.length){R(null),v(null),ee("ç›®å‰æ‰¾ä¸åˆ°æœªä¾†ç”Ÿæ—¥è³‡æ–™å¤¾å…§å®¹");return}R(_[0]?.key??null),v(_[0]?.docs[0]?.id??null)}catch(n){if(!e)return;ee(n instanceof Error?n.message:"æœªçŸ¥éŒ¯èª¤")}finally{e&&ce(!1)}})(),()=>{e=!1}},[]),l.useEffect(()=>{if(!u)return;u.entries.some(n=>n.id===P)||k(u.entries[0]?.id??null)},[u,P]),l.useEffect(()=>{if(!p.length||!j)return;const e=u?u.entries:[];for(const n of e)q[n.id]===void 0&&(async()=>{try{const o=await fetch(`${B}data/letters-ab/${n.contentPath}`,{cache:"no-store"});if(!o.ok)return;const f=Se(await o.text());ve(a=>a[n.id]===void 0?{...a,[n.id]:f}:a)}catch{}})()},[p,u,j,q]),l.useEffect(()=>{if(!r)return;r.docs.some(n=>n.id===H)||v(r.docs[0]?.id??null)},[r,H]),l.useEffect(()=>{const e=r?r.docs:[];for(const n of e)ne[n.id]===void 0&&(async()=>{try{const o=await fetch(`${B}data/master-pool/${n.contentPath}`,{cache:"no-store"});if(!o.ok)return;const f=Se(await o.text());Me(a=>a[n.id]===void 0?{...a,[n.id]:f}:a)}catch{}})()},[r,ne]),l.useEffect(()=>{if(!p.length||!i||ue.current===i)return;const e=je(p,i);if(e<0)return;const n=p[e],o=n.entries.find(f=>f.series==="birthday")??n.entries[0]??null;X(e),k(o?.id??null),F("reading"),ue.current=i},[i,p]);function le(e){const n=p[e];n&&(X(e),k(n.entries[0]?.id??null))}function fe(e,n){le(e),k(n),F("reading")}function U(e){if(!p.length)return;const n=I+e;n<0||n>=p.length||le(n)}function me(e){if(!u||!u.entries.length||!j)return;const n=u.entries.findIndex(f=>f.id===j.id);if(n<0)return;const o=n+e;o<0||o>=u.entries.length||k(u.entries[o]?.id??null)}function ze(){F("future-list"),!r&&x.length&&(R(x[0]?.key??null),v(x[0]?.docs[0]?.id??null))}function Pe(e){const n=x.find(o=>o.key===e);n&&(R(n.key),v(n.docs[0]?.id??null))}function He(e,n){R(e),v(n),F("future-reading")}function G(e){if(!r||!S)return;const n=r.docs.findIndex(f=>f.id===S.id);if(n<0)return;const o=n+e;o<0||o>=r.docs.length||v(r.docs[o]?.id??null)}function be(e){if(!r||!x.length)return;const n=x.findIndex(f=>f.key===r.key);if(n<0)return;const o=x[n+e];!o||!o.docs.length||(R(o.key),v(o.docs[0]?.id??null),F("future-reading"))}function ie(e,n,o,f,a){const d=e.current;if(e.current=null,!d)return;const b=n-d.x,$=o-d.y;Math.abs(b)<54||Math.abs(b)<=Math.abs($)*1.15||(b<0?f():a())}const xe=l.useMemo(()=>{if(!u||!j)return[];const e=[],n=j.series,o=u.entries.filter(a=>a.series===n),f=Math.max(0,o.findIndex(a=>a.id===j.id));for(const a of o)a.id!==j.id&&e.push({id:a.id,title:a.title,subtitle:`åŒå¹´ Â· ${z(n)}`,action:()=>{k(a.id),C(!1)}});for(let a=I-1;a>=0;a-=1){const d=p[a];if(!d)continue;const b=Fe(d,n,f);if(b){e.push({id:b.id,title:b.title,subtitle:`ä¸Šä¸€å¹´ Â· ${z(n)}`,action:()=>{fe(a,b.id),C(!1)}});break}}for(let a=I+1;a<p.length;a+=1){const d=p[a];if(!d)continue;const b=Fe(d,n,f);if(b){e.push({id:b.id,title:b.title,subtitle:`ä¸‹ä¸€å¹´ Â· ${z(n)}`,action:()=>{fe(a,b.id),C(!1)}});break}}return h&&e.push({id:`birthday-${u.year}`,title:`ç”Ÿæ—¥ä»»å‹™ï½œ${u.year}`,subtitle:"åˆ‡åˆ°æ¯æ—¥ä»»å‹™ Â· åŒå¹´ä»½",action:()=>{h(String(u.year)),C(!1)}}),e},[u,j,p,I,h]),ge=l.useMemo(()=>{if(!r)return null;const e=x.findIndex(n=>n.key===r.key);return e<=0?null:x[e-1]??null},[r,x]),pe=l.useMemo(()=>{if(!r)return null;const e=x.findIndex(n=>n.key===r.key);return e<0||e>=x.length-1?null:x[e+1]??null},[r,x]);if(g)return t.jsx("div",{className:"la-loading",children:"è®€å–å¹´åº¦ä¿¡ä»¶ä¸­..."});if(M)return t.jsx("div",{className:"la-loading",children:t.jsxs("p",{children:["è®€å–å¤±æ•—ï¼š",M]})});if(!p.length||!u)return t.jsx("div",{className:"la-loading",children:"ç›®å‰æ²’æœ‰å¹´åº¦ä¿¡ä»¶è³‡æ–™"});const De=it(u.entries);return t.jsxs("div",{className:`letters-ab-page ${y.theme==="a"?"theme-a":"theme-d"}`,children:[J==="home"?t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"la-top-bar",children:[t.jsxs("div",{className:"la-left",children:[t.jsx("button",{type:"button",className:"la-circle-btn",onClick:s,"aria-label":"è¿”å›",children:"â€¹"}),t.jsx("span",{className:"la-title",children:"å¹´åº¦ä¿¡ä»¶"})]}),t.jsx("button",{type:"button",className:"la-ghost-btn",onClick:()=>C(!0),"aria-label":"é–‹å•Ÿè¨­å®š",children:"â‹¯"})]}),t.jsx("section",{className:"la-timeline",children:t.jsx("div",{className:"la-year-strip",children:p.map((e,n)=>t.jsxs("button",{type:"button",className:`la-year-dot ${n===I?"active":""}`,onClick:()=>le(n),children:[t.jsx("span",{className:"dot"}),t.jsx("span",{className:"label",children:e.year})]},e.year))})}),t.jsx("button",{type:"button",className:"la-future-entry la-future-entry-home",onClick:ze,"aria-label":`é–‹å•Ÿ${V}`,children:t.jsx("span",{className:"la-future-entry-mark",children:"?"})}),t.jsxs("section",{className:"la-carousel",onTouchStart:e=>{const n=e.touches[0];n&&(se.current={x:n.clientX,y:n.clientY})},onTouchEnd:e=>{const n=e.changedTouches[0];n&&ie(se,n.clientX,n.clientY,()=>U(1),()=>U(-1))},onTouchCancel:()=>{se.current=null},children:[t.jsx("button",{type:"button",className:"la-arrow left",onClick:()=>U(-1),disabled:I<=0,"aria-label":"ä¸Šä¸€å¹´",children:"â€¹"}),t.jsxs("button",{type:"button",className:"la-year-card",onClick:()=>F("reading"),"aria-label":`é–‹å•Ÿ ${u.year} å¹´ä¿¡ä»¶`,children:[t.jsx("span",{className:"la-year-number",children:u.year}),t.jsxs("span",{className:"la-year-count",children:[u.entries.length," å°ä¿¡"]}),t.jsx("span",{className:"la-year-divider"}),t.jsx("span",{className:"la-doc-tags",children:De.map(e=>t.jsx("span",{className:"la-doc-tag",children:e},e))})]}),t.jsx("button",{type:"button",className:"la-arrow right",onClick:()=>U(1),disabled:I>=p.length-1,"aria-label":"ä¸‹ä¸€å¹´",children:"â€º"})]})]}):J==="reading"?t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"la-top-bar",children:[t.jsxs("div",{className:"la-left",children:[t.jsx("button",{type:"button",className:"la-circle-btn",onClick:()=>F("home"),"aria-label":"è¿”å›å…¥å£",children:"â€¹"}),t.jsxs("span",{className:"la-title",children:[u.year," å¹´åº¦ä¿¡ä»¶"]})]}),t.jsx("button",{type:"button",className:"la-ghost-btn",onClick:()=>C(!0),"aria-label":"é–‹å•Ÿè¨­å®š",children:"â‹¯"})]}),t.jsx("div",{className:"la-read-tabs",children:Re.map(e=>t.jsx("button",{type:"button",className:`la-tab ${e.entry.id===j?.id?"active":""}`,onClick:()=>k(e.entry.id),children:e.label},e.entry.id))}),t.jsx("section",{className:"la-paper-wrap",onTouchStart:e=>{const n=e.touches[0];n&&(ae.current={x:n.clientX,y:n.clientY})},onTouchEnd:e=>{const n=e.changedTouches[0];n&&ie(ae,n.clientX,n.clientY,()=>me(1),()=>me(-1))},onTouchCancel:()=>{ae.current=null},children:t.jsxs("div",{className:"la-paper",style:{lineHeight:de,fontFamily:he},children:[t.jsx("h3",{className:"la-paper-title",children:j?.title??"æœªå‘½åä¿¡ä»¶"}),t.jsx("p",{className:"la-paper-content",style:{fontSize:`${y.readingFontSize}px`},children:Le||"è®€å–å…§å®¹ä¸­..."})]})})]}):J==="future-list"?t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"la-top-bar",children:[t.jsxs("div",{className:"la-left",children:[t.jsx("button",{type:"button",className:"la-circle-btn",onClick:()=>F("home"),"aria-label":"è¿”å›å¹´åº¦å…¥å£",children:"â€¹"}),t.jsx("span",{className:"la-title",children:V})]}),t.jsx("button",{type:"button",className:"la-ghost-btn",onClick:()=>C(!0),"aria-label":"é–‹å•Ÿè¨­å®š",children:"â‹¯"})]}),Q?t.jsx("div",{className:"la-loading",children:"è®€å–æ¸…å–®ä¸­..."}):null,!Q&&Z?t.jsxs("div",{className:"la-loading",children:["è®€å–å¤±æ•—ï¼š",Z]}):null,!Q&&!Z?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"la-future-strip",children:x.map(e=>t.jsxs("button",{type:"button",className:`la-future-folder-pill ${e.key===r?.key?"active":""}`,onClick:()=>Pe(e.key),children:[t.jsx("span",{className:"la-future-folder-name",children:e.label}),t.jsx("span",{className:"la-future-folder-short",children:e.short})]},e.key))}),t.jsxs("section",{className:"la-future-list",children:[t.jsx("div",{className:"la-future-meta",children:r?`${r.docs.length} ä»½`:"0 ä»½"}),r?.docs.map(e=>t.jsxs("button",{type:"button",className:"la-future-item",onClick:()=>He(r.key,e.id),children:[t.jsxs("div",{className:"la-future-item-main",children:[t.jsx("div",{className:"la-future-item-title",children:e.title}),t.jsx("div",{className:"la-future-item-sub",children:Ce(e.writtenAt)})]}),t.jsx("span",{className:"la-future-item-arrow",children:"â€º"})]},e.id)),r?.docs.length?null:t.jsx("div",{className:"la-loading",children:"æ­¤è³‡æ–™å¤¾ç›®å‰æ²’æœ‰å…§å®¹"})]})]}):null]}):t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"la-top-bar la-future-reading-bar",children:[t.jsxs("div",{className:"la-left",children:[t.jsx("button",{type:"button",className:"la-circle-btn",onClick:()=>F("future-list"),"aria-label":"è¿”å›æ¸…å–®",children:"â€¹"}),t.jsx("span",{className:"la-title",children:V})]}),t.jsxs("div",{className:"la-future-tools",children:[t.jsx("button",{type:"button",className:`la-mini-arrow ${ge?"":"disabled"}`,onClick:()=>be(-1),disabled:!ge,"aria-label":"ä¸Šä¸€è³‡æ–™å¤¾ç¬¬ä¸€å°",children:"â€¹"}),t.jsx("button",{type:"button",className:`la-mini-arrow ${pe?"":"disabled"}`,onClick:()=>be(1),disabled:!pe,"aria-label":"ä¸‹ä¸€è³‡æ–™å¤¾ç¬¬ä¸€å°",children:"â€º"}),t.jsx("button",{type:"button",className:"la-ghost-btn",onClick:()=>C(!0),"aria-label":"é–‹å•Ÿè¨­å®š",children:"â‹¯"})]})]}),t.jsx("div",{className:"la-future-reading-meta",children:r?`${r.label} Â· ${r.short}`:V}),t.jsxs("div",{className:"la-future-inline-nav",children:[t.jsx("button",{type:"button",className:`la-inline-btn ${L<=0?"disabled":""}`,onClick:()=>G(-1),disabled:L<=0,children:"â€¹ ä¸Šä¸€å°"}),t.jsx("span",{className:"la-inline-status",children:r?`${L>=0?L+1:0} / ${r.docs.length}`:"0 / 0"}),t.jsx("button",{type:"button",className:`la-inline-btn ${!r||L>=r.docs.length-1?"disabled":""}`,onClick:()=>G(1),disabled:!r||L>=r.docs.length-1,children:"ä¸‹ä¸€å° â€º"})]}),t.jsx("section",{className:"la-paper-wrap",onTouchStart:e=>{const n=e.touches[0];n&&(re.current={x:n.clientX,y:n.clientY})},onTouchEnd:e=>{const n=e.changedTouches[0];n&&ie(re,n.clientX,n.clientY,()=>G(1),()=>G(-1))},onTouchCancel:()=>{re.current=null},children:t.jsxs("div",{className:"la-paper",style:{lineHeight:de,fontFamily:he},children:[t.jsx("h3",{className:"la-paper-title",children:S?.title??"æœªå‘½åä¿¡ä»¶"}),t.jsx("p",{className:"la-paper-subtitle",children:S?`${Ce(S.writtenAt)} Â· ${S.sourceFile}`:"è®€å–ä¸­"}),t.jsx("p",{className:"la-paper-content",style:{fontSize:`${y.readingFontSize}px`},children:_e||"è®€å–å…§å®¹ä¸­..."})]})})]}),y.showChibi?t.jsx("div",{className:"la-chibi-wrap",children:t.jsx("button",{type:"button",className:"la-chibi-btn",onClick:()=>C(!0),"aria-label":"é–‹å•Ÿé–±è®€è¨­å®š",children:t.jsx("img",{src:Ae,alt:"",draggable:!1,className:"calendar-chibi select-none",style:{width:y.chibiWidth,height:"auto"}})})}):null,$e?t.jsx("div",{className:"la-settings-overlay",onClick:()=>C(!1),children:t.jsxs("div",{className:"la-settings-sheet",onClick:e=>e.stopPropagation(),children:[t.jsx("div",{className:"la-sheet-handle"}),t.jsx(Y,{title:"ä¸»é¡Œ",isOpen:D.theme,onToggle:()=>O(e=>({...e,theme:!e.theme})),className:"la-sheet-section",titleClassName:"la-sheet-label",chevronClassName:"text-[#9a7d5a]",bodyClassName:"mt-2",children:t.jsx("div",{className:"la-pill-group",children:Ze.map(e=>t.jsx("button",{type:"button",className:`la-pill ${y.theme===e.key?"active":""}`,onClick:()=>A(n=>({...n,theme:e.key})),children:e.label},e.key))})}),t.jsxs(Y,{title:"æ’ç‰ˆ",subtitle:"è¡Œè·èˆ‡å­—ç´š",isOpen:D.typography,onToggle:()=>O(e=>({...e,typography:!e.typography})),className:"la-sheet-section",titleClassName:"la-sheet-label",subtitleClassName:"text-[11px] text-[#9a7d5a]",chevronClassName:"text-[#9a7d5a]",bodyClassName:"mt-2",children:[t.jsx("div",{className:"la-pill-group",children:qe.map(e=>t.jsx("button",{type:"button",className:`la-pill ${y.lineHeight===e.key?"active":""}`,onClick:()=>A(n=>({...n,lineHeight:e.key})),children:e.label},e.key))}),t.jsxs("label",{className:"la-range-row",children:[t.jsxs("span",{children:["å…§æ–‡å­—ç´šï¼š",y.readingFontSize.toFixed(1),"px"]}),t.jsx("input",{type:"range",min:11,max:20,step:.5,value:y.readingFontSize,onChange:e=>A(n=>({...n,readingFontSize:Ee(Number(e.target.value),n.readingFontSize)}))})]})]}),t.jsx(Y,{title:"å­—é«”",isOpen:D.font,onToggle:()=>O(e=>({...e,font:!e.font})),className:"la-sheet-section",titleClassName:"la-sheet-label",chevronClassName:"text-[#9a7d5a]",bodyClassName:"mt-2",children:t.jsx("div",{className:"la-pill-group",children:Qe.map(e=>t.jsx("button",{type:"button",className:`la-pill ${y.readingFont===e.key?"active":""}`,onClick:()=>A(n=>({...n,readingFont:e.key})),disabled:e.key==="letter"&&!c,title:e.key==="letter"&&!c?"å°šæœªè¨­å®šæƒ…æ›¸å­—é«”":void 0,children:e.label},e.key))})}),t.jsxs(Y,{title:"M",subtitle:"é¡¯ç¤ºèˆ‡å¤§å°",isOpen:D.chibi,onToggle:()=>O(e=>({...e,chibi:!e.chibi})),className:"la-sheet-section",titleClassName:"la-sheet-label",subtitleClassName:"text-[11px] text-[#9a7d5a]",chevronClassName:"text-[#9a7d5a]",bodyClassName:"mt-2",children:[t.jsxs("div",{className:"la-toggle-row",children:[t.jsx("span",{children:"M"}),t.jsx("button",{type:"button",className:`la-switch ${y.showChibi?"on":""}`,onClick:()=>A(e=>({...e,showChibi:!e.showChibi})),"aria-label":"åˆ‡æ›Mé¡¯ç¤º",children:t.jsx("span",{})})]}),t.jsx("label",{className:"la-range-row",children:t.jsx("input",{type:"range",min:96,max:186,step:1,value:y.chibiWidth,onChange:e=>A(n=>({...n,chibiWidth:we(Number(e.target.value),n.chibiWidth)}))})})]}),t.jsx(Y,{title:"ç›¸é—œé–±è®€",subtitle:"åŒç³»åˆ—å‰å¾Œå¹´ä»½",isOpen:D.related,onToggle:()=>O(e=>({...e,related:!e.related})),className:"la-sheet-section",titleClassName:"la-sheet-label",subtitleClassName:"text-[11px] text-[#9a7d5a]",chevronClassName:"text-[#9a7d5a]",bodyClassName:"mt-2",children:t.jsx("div",{className:"la-related-list",children:xe.length?xe.map(e=>t.jsxs("button",{type:"button",className:"la-related-item",onClick:e.action,children:[t.jsxs("span",{className:"la-related-text",children:[t.jsx("strong",{children:e.title}),t.jsx("small",{children:e.subtitle})]}),t.jsx("span",{className:"la-related-arrow",children:"â€º"})]},e.id)):t.jsx("p",{className:"la-empty-related",children:"ç›®å‰æ²’æœ‰å¯è·³è½‰çš„é …ç›®"})})})]})}):null]})}export{bt as LettersABPage,bt as default};
